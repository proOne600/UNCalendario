function onend(){--pending>0||(it(output).deepEqual([[],[{hello:"world"}]]),console.error("PASSED"))}function makeReadableStream(){var e=new stream.Stream;return e.readable=!0,e.write=function(e){this.emit("data",e)},e.end=function(){this.emit("end")},e}var JSONStream=require("../"),stream=require("stream"),it=require("it-is"),output=[[],[]],parser1=JSONStream.parse(["docs",/./]);parser1.on("data",function(e){output[0].push(e)});var parser2=JSONStream.parse(["docs",/./]);parser2.on("data",function(e){output[1].push(e)});var pending=2;parser1.on("end",onend),parser2.on("end",onend);var emptyArray=makeReadableStream();emptyArray.pipe(parser1),emptyArray.write('{"docs":[]}'),emptyArray.end();var objectArray=makeReadableStream();objectArray.pipe(parser2),objectArray.write('{"docs":[{"hello":"world"}]}'),objectArray.end();